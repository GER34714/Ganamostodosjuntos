<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DINASTY BET ‚Ñ¢</title>
  <meta name="description" content="üé∞ DINASTY BET ‚Ñ¢ - Tu experiencia definitiva de juego online. ¬°Ped√≠ tu usuario y empez√° a divertirte ahora!">
  
  <!-- Open Graph -->
  <meta property="og:title" content="DINASTY BET ‚Ñ¢">
  <meta property="og:description" content="üé∞ DINASTY BET ‚Ñ¢ - Tu experiencia definitiva de juego online. ¬°Ped√≠ tu usuario y empez√° a divertirte ahora!">
  <meta property="og:image" content="https://tusitio.com/logo.jpg">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://tusitio.com/">

  <!-- Google Analytics 4 -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-502569916"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-502569916');
  </script>

  <style>
    body {
      font-family: Arial, sans-serif;
      background: #111;
      color: #fff;
      margin: 0;
      padding: 0;
      text-align: center;
    }
    header {
      padding: 20px;
      background: #222;
    }
    header img {
      max-width: 200px;
    }
    h1 {
      color: #f1c40f;
      margin: 20px 0 10px;
    }
    p {
      font-size: 18px;
      margin: 10px 0 30px;
    }
    .btn {
      display: inline-block;
      padding: 15px 25px;
      margin: 10px;
      font-size: 18px;
      color: #fff;
      background: #27ae60;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      text-decoration: none;
      transition: background 0.3s ease;
    }
    .btn:hover {
      background: #2ecc71;
    }
    #contador {
      margin: 20px 0;
      font-size: 20px;
      font-weight: bold;
    }
    #blocked-message {
      margin: 20px auto;
      padding: 10px;
      color: #ffcc00;
      font-size: 18px;
      white-space: pre-line;
    }
  </style>
</head>
<body>
  <header>
    <img src="https://tusitio.com/logo.jpg" alt="DINASTY BET Logo">
    <h1>üé∞ DINASTY BET ‚Ñ¢</h1>
    <p>¬°Ped√≠ tu usuario y empez√° a divertirte ahora mismo!</p>
  </header>

  <main>
    <div id="contador">Actualmente hay 230 jugadores conectados üé≤</div>
    <button id="btn-usuario" class="btn">üì≤ Quiero mi usuario</button>
    <button id="btn-dudas" class="btn">‚ÑπÔ∏è M√°s informaci√≥n</button>
    <div id="blocked-message"></div>
  </main>

  <footer style="margin-top:50px; padding:20px; background:#222;">
    <p>&copy; 2025 DINASTY BET ‚Ñ¢ - Todos los derechos reservados.</p>
  </footer>

  <script>
    const BLOQUEO_MS = 180000; // 3 minutos

    const WHATS_LINES = [
      {name:'Martin', num:'5491132525913'},
      {name:'Lucas', num:'5491171334027'},
      {name:'Cami', num:'5491156349123'},
      {name:'Octavio', num:'5491173566830'},
      {name:'Joaki', num:'5491123365501'},
      {name:'Facu', num:'5491125127839'},
      {name:'Ale', num:'5492615027973'}
    ];

    let shuffled = [];
    let currentIndex = 0;
    let lastNumber = null;
    let blockedUntil = 0;
    let blockedMessage = '';
    let blockedName = '';

    // Cargar estado previo
    if(localStorage.getItem('shuffledList')){
      shuffled = JSON.parse(localStorage.getItem('shuffledList'));
      currentIndex = parseInt(localStorage.getItem('currentIndex'),10)||0;
      lastNumber = localStorage.getItem('lastNumber')||null;
      blockedUntil = parseInt(localStorage.getItem('blockedUntil'),10)||0;
      blockedMessage = localStorage.getItem('blockedMessage')||'';
      blockedName = localStorage.getItem('blockedName')||'';
    }

    function shuffleArray(arr){
      const copy = [...arr];
      for(let i=copy.length-1;i>0;i--){
        const j = Math.floor(Math.random()*(i+1));
        [copy[i],copy[j]]=[copy[j],copy[i]];
      }
      return copy;
    }

    function newShuffledList(){
      let newList;
      do{
        newList = shuffleArray(WHATS_LINES);
      }while(newList[0].num===lastNumber && WHATS_LINES.length>1);
      return newList;
    }

    function saveState(){
      localStorage.setItem('shuffledList',JSON.stringify(shuffled));
      localStorage.setItem('currentIndex',currentIndex);
      localStorage.setItem('lastNumber',lastNumber);
      localStorage.setItem('blockedUntil',blockedUntil);
      localStorage.setItem('blockedMessage',blockedMessage);
      localStorage.setItem('blockedName',blockedName);
    }

    function getNextLineUsuario(){
      const now = Date.now();
      if(now < blockedUntil){
        return { num:lastNumber, message:blockedMessage, name:blockedName };
      }
      if(currentIndex>=shuffled.length){
        shuffled=newShuffledList();
        currentIndex=0;
      }
      const line = shuffled[currentIndex++];
      lastNumber=line.num;
      blockedName=line.name;
      blockedMessage=`YA TE CONTACTASTE con ${line.name}...\nrevis√° tu WhatsApp.\nMucha suerte üçÄüì≤üòä`;
      blockedUntil=now+BLOQUEO_MS;
      saveState();
      return { num:line.num, message:blockedMessage, name:line.name };
    }

    function openWhatsAppUsuario(){
      const line = getNextLineUsuario();
      const msg = `Hola ${line.name} üòä, vengo de tu sitio web, ¬øme creas un usuario por favor?`;

      document.getElementById('blocked-message').innerText=line.message;
      document.getElementById('btn-usuario').disabled=true;
      
      setTimeout(()=>{
        document.getElementById('btn-usuario').disabled=false;
        document.getElementById('blocked-message').innerText='';
      }, BLOQUEO_MS);
      
      const url=`https://wa.me/${line.num}?text=${encodeURIComponent(msg)}`;
      const w=window.open(url,'_blank','noopener');
      if(!w) location.href=url;
      if(typeof gtag==='function'){
        gtag('event','click_whatsapp',{button_type:'usuario',whatsapp_number:line.num});
      }
    }

    let dudaIndex=0;
    function openWhatsAppDudas(){
      const line = WHATS_LINES[dudaIndex++];
      if(dudaIndex>=WHATS_LINES.length) dudaIndex=0;
      const msg=`Hola ${line.name} üòä, me das m√°s informaci√≥n? Vengo de tu sitio web! Gracias`;
      const url=`https://wa.me/${line.num}?text=${encodeURIComponent(msg)}`;
      const w=window.open(url,'_blank','noopener');
      if(!w) location.href=url;
      if(typeof gtag==='function'){
        gtag('event','click_whatsapp',{button_type:'dudas',whatsapp_number:line.num});
      }
    }

    document.getElementById('btn-usuario').addEventListener('click',openWhatsAppUsuario);
    document.getElementById('btn-dudas').addEventListener('click',openWhatsAppDudas);

    function actualizarContador(){
      const base=230;
      const variacion=Math.floor(Math.random()*40);
      const total=base+variacion;
      document.getElementById("contador").innerText=`Actualmente hay ${total} jugadores conectados üé≤`;
    }
    actualizarContador();
    setInterval(actualizarContador,5000);

    const now=Date.now();
    if(now<blockedUntil && blockedMessage){
      document.getElementById('blocked-message').innerText=blockedMessage;
      document.getElementById('btn-usuario').disabled=true;
      setTimeout(()=>{
        document.getElementById('btn-usuario').disabled=false;
        document.getElementById('blocked-message').innerText='';
      }, blockedUntil-now);
    }
  </script>
</body>
</html>
